<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpportunityScope - AI Business Intelligence</title>
    <script>
        // Define functions immediately in head so they're available when HTML loads
        window.switchTab = function(tabName) {
            console.log('switchTab called with:', tabName);
            
            // Remove active from all tabs and panels
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            
            // Add active to clicked tab
            if (event && event.target) {
                event.target.classList.add('active');
            }
            
            // Add active to target panel
            const targetPanel = document.getElementById(tabName + '-tab');
            if (targetPanel) {
                targetPanel.classList.add('active');
                console.log('Activated panel:', tabName);
            }
            
            // Trigger chart animation if switching to analysis tab
            if (tabName === 'analysis') {
                setTimeout(() => {
                    const chartLine = document.querySelector('.chart-line');
                    if (chartLine && window.animateChart) {
                        window.animateChart();
                    }
                }, 300);
            }
        };

        window.analyzeMarket = function() {
            const btn = event.target;
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '🔄 Analyzing...';
            btn.disabled = true;
            
            setTimeout(() => {
                btn.innerHTML = '✅ Complete!';
                btn.style.background = 'linear-gradient(135deg, #10b981, #059669)';
                
                // Animate progress bars
                document.querySelectorAll('.progress-fill').forEach(bar => {
                    const width = bar.style.width;
                    bar.style.width = '0%';
                    setTimeout(() => {
                        bar.style.width = width;
                    }, 200);
                });
                
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.style.background = '';
                    btn.disabled = false;
                }, 3000);
            }, 2500);
        };

        window.showQuickActions = function() {
            alert('Quick Actions:\n• Generate Report\n• Export Data\n• Schedule Analysis\n• Set Alerts');
        };

        window.animateChart = function() {
            const chartLine = document.querySelector('.chart-line');
            const chartDots = document.querySelectorAll('.chart-dot');
            
            if (chartLine) {
                const pathLength = chartLine.getTotalLength();
                chartLine.style.strokeDasharray = pathLength + ' ' + pathLength;
                chartLine.style.strokeDashoffset = pathLength;
                chartLine.style.transition = 'stroke-dashoffset 2s ease-in-out';
                
                setTimeout(() => {
                    chartLine.style.strokeDashoffset = '0';
                }, 100);
                
                chartDots.forEach((dot, index) => {
                    dot.style.opacity = '0';
                    dot.style.transform = 'scale(0)';
                    dot.style.transition = 'all 0.4s ease';
                    
                    setTimeout(() => {
                        dot.style.opacity = '1';
                        dot.style.transform = 'scale(1)';
                    }, 300 + index * 150);
                });
            }
        };
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --accent: #06b6d4;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1f2937;
            --dark-light: #374151;
            --gray: #6b7280;
            --gray-light: #9ca3af;
            --gray-lighter: #f3f4f6;
            --white: #ffffff;
            --backdrop: rgba(0, 0, 0, 0.5);
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #6366f1 100%);
            background-attachment: fixed;
            min-height: 100vh;
            color: var(--dark);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem;
        }

        /* Header */
        .header {
            text-align: center;
            color: white;
            margin-bottom: 2rem;
            padding: 2rem 0;
        }

        .header h1 {
            font-size: clamp(2rem, 5vw, 3.5rem);
            margin-bottom: 0.5rem;
            font-weight: 800;
            text-shadow: 0 4px 20px rgba(0,0,0,0.3);
            background: linear-gradient(45deg, #fff, #e0e7ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: clamp(1rem, 3vw, 1.25rem);
            opacity: 0.9;
            margin-bottom: 1rem;
        }

        .header-stats {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-top: 1.5rem;
            flex-wrap: wrap;
        }

        .stat-item {
            text-align: center;
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border: 1px solid var(--glass-border);
            padding: 1rem;
            border-radius: 1rem;
            min-width: 120px;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            display: block;
        }

        .stat-label {
            font-size: 0.875rem;
            opacity: 0.8;
        }

        /* Main Interface */
        .main-interface {
            background: var(--white);
            border-radius: 1.5rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            overflow: hidden;
            margin-bottom: 2rem;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.1);
        }

        /* Mobile-first tabs */
        .tabs {
            display: flex;
            background: var(--gray-lighter);
            overflow-x: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .tabs::-webkit-scrollbar {
            display: none;
        }

        .tab {
            padding: 1rem 1.5rem;
            cursor: pointer;
            background: none;
            border: none;
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--gray);
            transition: all 0.3s ease;
            white-space: nowrap;
            position: relative;
            min-width: fit-content;
        }

        .tab.active {
            background: var(--white);
            color: var(--primary);
            border-radius: 0.75rem 0.75rem 0 0;
            transform: translateY(-2px);
            box-shadow: 0 -4px 20px rgba(99, 102, 241, 0.15);
        }

        .tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 2px 2px 0 0;
        }

        .tab-content {
            padding: 1.5rem;
            min-height: 70vh;
        }

        .tab-panel {
            display: none;
            animation: fadeInUp 0.4s ease-out;
        }

        .tab-panel.active {
            display: block;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Search Section */
        .search-section {
            background: linear-gradient(135deg, var(--gray-lighter) 0%, rgba(255,255,255,0.8) 100%);
            padding: 1.5rem;
            border-radius: 1rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(99, 102, 241, 0.1);
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .search-form {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        @media (min-width: 768px) {
            .search-form {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (min-width: 1024px) {
            .search-form {
                grid-template-columns: 1fr 1fr 1fr auto;
            }
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--dark);
            font-size: 0.875rem;
        }

        .form-control {
            padding: 0.875rem 1rem;
            border: 2px solid rgba(99, 102, 241, 0.1);
            border-radius: 0.75rem;
            font-size: 0.875rem;
            transition: all 0.3s ease;
            background: var(--white);
            color: var(--dark);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
            transform: translateY(-1px);
        }

        /* Modern Buttons */
        .btn {
            padding: 0.875rem 1.5rem;
            border: none;
            border-radius: 0.75rem;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.875rem;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
        }

        .btn-secondary {
            background: var(--gray);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
        }

        /* Cards Grid */
        .cards-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        @media (min-width: 768px) {
            .cards-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 1024px) {
            .cards-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Modern Cards */
        .card {
            background: var(--white);
            border-radius: 1rem;
            padding: 1.5rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            border: 1px solid rgba(99, 102, 241, 0.1);
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent));
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .card-icon {
            width: 3rem;
            height: 3rem;
            border-radius: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            font-size: 1.25rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            position: relative;
            overflow: hidden;
        }

        .card-icon::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: rotate(45deg);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .card-title {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--dark);
        }

        /* Metrics */
        .metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--gray-lighter);
        }

        .metric:last-child {
            border-bottom: none;
        }

        .metric-label {
            color: var(--gray);
            font-size: 0.875rem;
            font-weight: 500;
        }

        .metric-value {
            font-weight: 700;
            color: var(--dark);
            font-size: 1rem;
        }

        /* Modern Score Badges */
        .score {
            padding: 0.375rem 0.875rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.025em;
            display: inline-flex;
            align-items: center;
            gap: 0.25rem;
        }

        .score::before {
            content: '';
            width: 0.5rem;
            height: 0.5rem;
            border-radius: 50%;
            background: currentColor;
        }

        .score.high {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .score.medium {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .score.low {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        /* Modern Progress Bars */
        .progress-container {
            margin-top: 0.5rem;
        }

        .progress-bar {
            background: var(--gray-lighter);
            border-radius: 9999px;
            height: 0.5rem;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            border-radius: 9999px;
            transition: width 1s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: progressShimmer 2s infinite;
        }

        @keyframes progressShimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Opportunity Items */
        .opportunities-list {
            max-height: 60vh;
            overflow-y: auto;
            padding-right: 0.5rem;
        }

        .opportunities-list::-webkit-scrollbar {
            width: 0.25rem;
        }

        .opportunities-list::-webkit-scrollbar-track {
            background: var(--gray-lighter);
            border-radius: 9999px;
        }

        .opportunities-list::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 9999px;
        }

        .opportunity-item {
            background: linear-gradient(135deg, rgba(255,255,255,0.8), rgba(243,244,246,0.8));
            border-radius: 0.75rem;
            padding: 1.25rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--primary);
            transition: all 0.3s ease;
            cursor: pointer;
            backdrop-filter: blur(10px);
        }

        .opportunity-item:hover {
            transform: translateX(0.5rem);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.15);
            border-left-color: var(--secondary);
        }

        .opportunity-title {
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .opportunity-desc {
            font-size: 0.875rem;
            color: var(--gray);
            margin-bottom: 0.75rem;
            line-height: 1.5;
        }

        .opportunity-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            margin-bottom: 0.75rem;
        }

        .tag {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .opportunity-score {
            text-align: right;
            font-weight: 700;
            color: var(--success);
            font-size: 0.875rem;
        }

        /* Chart Improvements */
        .chart-container {
            height: 300px;
            background: linear-gradient(135deg, var(--gray-lighter), rgba(255,255,255,0.8));
            border-radius: 0.75rem;
            margin-top: 1rem;
            position: relative;
            overflow: hidden;
            padding: 1.25rem;
            backdrop-filter: blur(10px);
        }

        .chart-svg {
            width: 100%;
            height: 100%;
        }

        .chart-line {
            fill: none;
            stroke: url(#gradient);
            stroke-width: 3;
            filter: drop-shadow(0 2px 4px rgba(99, 102, 241, 0.3));
        }

        .chart-area {
            fill: url(#areaGradient);
        }

        .chart-dot {
            fill: var(--primary);
            stroke: white;
            stroke-width: 3;
            filter: drop-shadow(0 2px 4px rgba(99, 102, 241, 0.3));
        }

        .chart-label {
            font-size: 0.75rem;
            fill: var(--gray);
            font-family: inherit;
        }

        .chart-value {
            font-size: 0.625rem;
            fill: var(--dark);
            font-weight: 600;
        }

        /* Alerts */
        .alert {
            padding: 1rem 1.25rem;
            border-radius: 0.75rem;
            margin-bottom: 1rem;
            border-left: 4px solid;
            position: relative;
            overflow: hidden;
        }

        .alert::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }

        .alert:hover::before {
            transform: translateX(100%);
        }

        .alert-success {
            background: rgba(16, 185, 129, 0.1);
            color: #065f46;
            border-left-color: var(--success);
        }

        .alert-warning {
            background: rgba(245, 158, 11, 0.1);
            color: #92400e;
            border-left-color: var(--warning);
        }

        .alert-info {
            background: rgba(6, 182, 212, 0.1);
            color: #155e75;
            border-left-color: var(--accent);
        }

        /* Competitor Cards */
        .competitors-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .competitor-card {
            background: var(--white);
            border-radius: 0.75rem;
            padding: 1.25rem;
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid rgba(99, 102, 241, 0.1);
        }

        .competitor-card:hover {
            transform: translateY(-0.25rem);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .competitor-logo {
            width: 3.5rem;
            height: 3.5rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.125rem;
        }

        /* Reports Section */
        .reports-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }

        @media (min-width: 768px) {
            .reports-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .report-card {
            background: var(--white);
            border-radius: 0.75rem;
            padding: 1.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1px solid rgba(99, 102, 241, 0.1);
        }

        .report-card:hover {
            transform: translateY(-0.25rem);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .report-icon {
            width: 3.5rem;
            height: 3.5rem;
            border-radius: 0.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1.25rem;
            font-size: 1.5rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        /* Mobile Responsive */
        @media (max-width: 767px) {
            .container {
                padding: 0.75rem;
            }

            .header {
                padding: 1rem 0;
                margin-bottom: 1.5rem;
            }

            .header-stats {
                gap: 1rem;
            }

            .stat-item {
                min-width: 100px;
                padding: 0.75rem;
            }

            .tab-content {
                padding: 1rem;
            }

            .search-section {
                padding: 1rem;
            }

            .card {
                padding: 1rem;
            }

            .cards-grid {
                gap: 1rem;
            }

            .opportunities-list {
                max-height: 50vh;
            }
        }

        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            :root {
                --white: #1f2937;
                --dark: #f9fafb;
                --gray-lighter: #374151;
                --gray: #9ca3af;
            }
        }

        /* Loading States */
        .loading {
            position: relative;
            overflow: hidden;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(99, 102, 241, 0.1), transparent);
            animation: loading 1.5s infinite;
        }

        @keyframes loading {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* Floating Action Button */
        .fab {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 3.5rem;
            height: 3.5rem;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            z-index: 1000;
        }

        .fab:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 35px rgba(99, 102, 241, 0.5);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>OpportunityScope</h1>
            <p>AI-Powered Business Intelligence & Market Analysis</p>
            <div class="header-stats">
                <div class="stat-item">
                    <span class="stat-value">47K+</span>
                    <span class="stat-label">Opportunities</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value">2.3M</span>
                    <span class="stat-label">Data Points</span>
                </div>
                <div class="stat-item">
                    <span class="stat-value">89%</span>
                    <span class="stat-label">Accuracy</span>
                </div>
            </div>
        </div>

        <div class="main-interface">
            <div class="tabs">
                <button class="tab active" onclick="window.switchTab('analysis')">📊 Analysis</button>
                <button class="tab" onclick="window.switchTab('opportunities')">💡 Opportunities</button>
                <button class="tab" onclick="window.switchTab('competitors')">🏆 Competition</button>
                <button class="tab" onclick="window.switchTab('insights')">🤖 AI Insights</button>
                <button class="tab" onclick="window.switchTab('reports')">📄 Reports</button>
            </div>

            <div class="tab-content">
                <!-- Market Analysis Tab -->
                <div id="analysis-tab" class="tab-panel active">
                    <div class="search-section">
                        <h3 class="section-title">🎯 Define Analysis Scope</h3>
                        <div class="search-form">
                            <div class="form-group">
                                <label>Industry/Field</label>
                                <select class="form-control" id="industry-select">
                                    <option>🌾 Agriculture & Food Tech</option>
                                    <option>🏥 Healthcare & Medicine</option>
                                    <option>💰 Financial Technology</option>
                                    <option>⚡ Clean Energy</option>
                                    <option>🤖 Artificial Intelligence</option>
                                    <option>🧬 Biotechnology</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Market Region</label>
                                <select class="form-control">
                                    <option>🌍 Global Market</option>
                                    <option>🇺🇸 North America</option>
                                    <option>🇪🇺 Europe</option>
                                    <option>🌏 Asia-Pacific</option>
                                    <option>🌍 Middle East & Africa</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Time Horizon</label>
                                <select class="form-control">
                                    <option>📅 Next 2 Years</option>
                                    <option>📅 Next 5 Years</option>
                                    <option>📅 Next 10 Years</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>&nbsp;</label>
                                <button class="btn btn-primary" onclick="window.analyzeMarket()">
                                    🚀 Analyze
                                </button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>🔍 Keywords & Technologies</label>
                            <input type="text" class="form-control" placeholder="precision agriculture, IoT sensors, AI crop monitoring" value="precision agriculture, IoT sensors, AI crop monitoring">
                        </div>
                    </div>

                    <div class="cards-grid">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-icon">📊</div>
                                <div class="card-title">Market Overview</div>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Market Size (2025)</span>
                                <span class="metric-value">$127.5B</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Growth Rate (CAGR)</span>
                                <span class="metric-value">12.3%</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Projected (2030)</span>
                                <span class="metric-value">$225.8B</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Maturity</span>
                                <span class="score medium">Emerging</span>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div class="card-icon">🎯</div>
                                <div class="card-title">Opportunity Score</div>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Overall Score</span>
                                <span class="metric-value">8.7/10</span>
                            </div>
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 87%;"></div>
                                </div>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Tech Gaps</span>
                                <span class="score high">High Potential</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">ROI Potential</span>
                                <span class="score high">Excellent</span>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div class="card-icon">⚡</div>
                                <div class="card-title">Tech Adoption</div>
                            </div>
                            <div class="metric">
                                <span class="metric-label">AI Integration</span>
                                <div class="progress-container">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 85%;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="metric">
                                <span class="metric-label">IoT Adoption</span>
                                <div class="progress-container">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 72%;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Automation</span>
                                <div class="progress-container">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 68%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div class="card-icon">💰</div>
                                <div class="card-title">Investment Climate</div>
                            </div>
                            <div class="metric">
                                <span class="metric-label">VC Funding (2024)</span>
                                <span class="metric-value">$8.4B</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Deal Count</span>
                                <span class="metric-value">234</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Avg Deal Size</span>
                                <span class="metric-value">$36M</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Exit Activity</span>
                                <span class="score high">Very Active</span>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div class="card-icon">🌍</div>
                                <div class="card-title">Regional Split</div>
                            </div>
                            <div class="metric">
                                <span class="metric-label">North America</span>
                                <div class="progress-container">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 45%;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Europe</span>
                                <div class="progress-container">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 28%;"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Asia-Pacific</span>
                                <div class="progress-container">
                                    <div class="progress-bar">
                                        <div class="progress-fill" style="width: 22%;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div class="card-icon">📈</div>
                                <div class="card-title">Growth Trends</div>
                            </div>
                            <div class="chart-container">
                                <svg class="chart-svg" viewBox="0 0 300 200">
                                    <defs>
                                        <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                            <stop offset="0%" style="stop-color:#6366f1;stop-opacity:1" />
                                            <stop offset="100%" style="stop-color:#8b5cf6;stop-opacity:1" />
                                        </linearGradient>
                                        <linearGradient id="areaGradient" x1="0%" y1="0%" x2="0%" y2="100%">
                                            <stop offset="0%" style="stop-color:#6366f1;stop-opacity:0.3" />
                                            <stop offset="100%" style="stop-color:#8b5cf6;stop-opacity:0.1" />
                                        </linearGradient>
                                    </defs>
                                    
                                    <!-- Grid -->
                                    <g stroke="#e5e7eb" stroke-width="1">
                                        <line x1="50" y1="30" x2="50" y2="150"></line>
                                        <line x1="50" y1="150" x2="280" y2="150"></line>
                                        <line x1="50" y1="110" x2="280" y2="110" stroke-dasharray="2,2" opacity="0.5"></line>
                                        <line x1="50" y1="70" x2="280" y2="70" stroke-dasharray="2,2" opacity="0.5"></line>
                                    </g>
                                    
                                    <!-- Area -->
                                    <path class="chart-area" d="M 50 130 L 90 120 L 130 110 L 170 95 L 210 80 L 250 65 L 280 50 L 280 150 L 50 150 Z"></path>
                                    
                                    <!-- Line -->
                                    <path class="chart-line" d="M 50 130 L 90 120 L 130 110 L 170 95 L 210 80 L 250 65 L 280 50"></path>
                                    
                                    <!-- Points -->
                                    <circle class="chart-dot" cx="50" cy="130" r="4"></circle>
                                    <circle class="chart-dot" cx="90" cy="120" r="4"></circle>
                                    <circle class="chart-dot" cx="130" cy="110" r="4"></circle>
                                    <circle class="chart-dot" cx="170" cy="95" r="4"></circle>
                                    <circle class="chart-dot" cx="210" cy="80" r="4"></circle>
                                    <circle class="chart-dot" cx="250" cy="65" r="4"></circle>
                                    <circle class="chart-dot" cx="280" cy="50" r="4"></circle>
                                    
                                    <!-- Labels -->
                                    <text class="chart-label" x="50" y="170" text-anchor="middle">2020</text>
                                    <text class="chart-label" x="130" y="170" text-anchor="middle">2022</text>
                                    <text class="chart-label" x="210" y="170" text-anchor="middle">2024</text>
                                    <text class="chart-label" x="280" y="170" text-anchor="middle">2030</text>
                                    
                                    <text class="chart-label" x="45" y="155" text-anchor="end">$0</text>
                                    <text class="chart-label" x="45" y="115" text-anchor="end">$100B</text>
                                    <text class="chart-label" x="45" y="75" text-anchor="end">$200B</text>
                                    
                                    <!-- Values -->
                                    <text class="chart-value" x="50" y="125" text-anchor="middle">$85B</text>
                                    <text class="chart-value" x="210" y="75" text-anchor="middle">$127B</text>
                                    <text class="chart-value" x="280" y="45" text-anchor="middle">$226B</text>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Opportunities Tab -->
                <div id="opportunities-tab" class="tab-panel">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; flex-wrap: wrap; gap: 1rem;">
                        <h2 class="section-title">💡 Top Business Opportunities</h2>
                        <div style="display: flex; gap: 0.75rem;">
                            <button class="btn btn-secondary">🔧 Filter</button>
                            <button class="btn btn-success">📄 Export</button>
                        </div>
                    </div>

                    <div class="cards-grid">
                        <div class="card" style="grid-column: 1 / -1;">
                            <div class="card-header">
                                <div class="card-icon">🚀</div>
                                <div class="card-title">High-Impact Opportunities</div>
                            </div>
                            <div class="opportunities-list">
                                <div class="opportunity-item">
                                    <div class="opportunity-title">🤖 AI-Powered Crop Disease Detection</div>
                                    <div class="opportunity-desc">Computer vision system for early detection of crop diseases using drone imagery and satellite data. Current market solutions have 60% accuracy - opportunity for 90%+ systems.</div>
                                    <div class="opportunity-tags">
                                        <span class="tag">AI</span>
                                        <span class="tag">Computer Vision</span>
                                        <span class="tag">Agriculture</span>
                                        <span class="tag">Drones</span>
                                    </div>
                                    <div class="opportunity-score">💯 Score: 9.2/10</div>
                                </div>
                                
                                <div class="opportunity-item">
                                    <div class="opportunity-title">💧 Smart Irrigation Platform</div>
                                    <div class="opportunity-desc">IoT-based precision irrigation reducing water usage by 40% while increasing yield. Integration with weather APIs and soil sensors.</div>
                                    <div class="opportunity-tags">
                                        <span class="tag">IoT</span>
                                        <span class="tag">Sustainability</span>
                                        <span class="tag">Water Tech</span>
                                        <span class="tag">SaaS</span>
                                    </div>
                                    <div class="opportunity-score">💯 Score: 8.8/10</div>
                                </div>

                                <div class="opportunity-item">
                                    <div class="opportunity-title">🔗 Blockchain Supply Chain</div>
                                    <div class="opportunity-desc">End-to-end food traceability platform using blockchain. Addresses consumer transparency demands and regulatory compliance.</div>
                                    <div class="opportunity-tags">
                                        <span class="tag">Blockchain</span>
                                        <span class="tag">Supply Chain</span>
                                        <span class="tag">Food Safety</span>
                                        <span class="tag">Compliance</span>
                                    </div>
                                    <div class="opportunity-score">💯 Score: 8.5/10</div>
                                </div>

                                <div class="opportunity-item">
                                    <div class="opportunity-title">🏢 Vertical Farming Automation</div>
                                    <div class="opportunity-desc">Fully automated vertical farming with AI-optimized growing conditions. Addresses urban food security and climate adaptation.</div>
                                    <div class="opportunity-tags">
                                        <span class="tag">Automation</span>
                                        <span class="tag">Vertical Farming</span>
                                        <span class="tag">Urban Ag</span>
                                        <span class="tag">Climate Tech</span>
                                    </div>
                                    <div class="opportunity-score">💯 Score: 8.3/10</div>
                                </div>

                                <div class="opportunity-item">
                                    <div class="opportunity-title">💳 Agricultural FinTech</div>
                                    <div class="opportunity-desc">Digital lending platform for small farmers using alternative credit scoring based on satellite data and farming practices.</div>
                                    <div class="opportunity-tags">
                                        <span class="tag">FinTech</span>
                                        <span class="tag">Insurance</span>
                                        <span class="tag">Alt Credit</span>
                                        <span class="tag">Financial Inclusion</span>
                                    </div>
                                    <div class="opportunity-score">💯 Score: 8.1/10</div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div class="card-icon">📊</div>
                                <div class="card-title">Opportunity Metrics</div>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Total Found</span>
                                <span class="metric-value">47</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">High Potential (8+)</span>
                                <span class="metric-value">23</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Market Potential</span>
                                <span class="metric-value">$45.2B</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Avg Time to Market</span>
                                <span class="metric-value">18 months</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Competition Tab -->
                <div id="competitors-tab" class="tab-panel">
                    <h2 class="section-title">🏆 Competitive Landscape</h2>
                    
                    <div class="cards-grid">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-icon">👑</div>
                                <div class="card-title">Market Leaders</div>
                            </div>
                            <div class="competitors-grid">
                                <div class="competitor-card">
                                    <div class="competitor-logo">JD</div>
                                    <h4>John Deere</h4>
                                    <p style="color: var(--gray); font-size: 0.875rem;">Market Leader</p>
                                    <div class="metric">
                                        <span class="metric-label">Share</span>
                                        <span class="metric-value">23%</span>
                                    </div>
                                </div>
                                <div class="competitor-card">
                                    <div class="competitor-logo">CL</div>
                                    <h4>Climate Corp</h4>
                                    <p style="color: var(--gray); font-size: 0.875rem;">Digital Platform</p>
                                    <div class="metric">
                                        <span class="metric-label">Share</span>
                                        <span class="metric-value">18%</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div class="card-icon">🚀</div>
                                <div class="card-title">Rising Stars</div>
                            </div>
                            <div class="opportunities-list" style="max-height: 300px;">
                                <div class="opportunity-item">
                                    <div class="opportunity-title">FarmBot Technologies</div>
                                    <div class="opportunity-desc">AI-driven autonomous farming robots</div>
                                    <div class="opportunity-score">💰 $50M Series B</div>
                                </div>
                                <div class="opportunity-item">
                                    <div class="opportunity-title">CropX Technologies</div>
                                    <div class="opportunity-desc">Soil monitoring and analytics</div>
                                    <div class="opportunity-score">💰 $35M Series A</div>
                                </div>
                                <div class="opportunity-item">
                                    <div class="opportunity-title">Indigo Agriculture</div>
                                    <div class="opportunity-desc">Microbiology platform</div>
                                    <div class="opportunity-score">💰 $2B+ Total</div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div class="card-icon">⚠️</div>
                                <div class="card-title">Market Gaps</div>
                            </div>
                            <div class="opportunities-list" style="max-height: 300px;">
                                <div class="opportunity-item">
                                    <div class="opportunity-title">🏡 Small Farm Solutions</div>
                                    <div class="opportunity-desc">Affordable tech for farms under 100 acres</div>
                                    <div class="opportunity-score">🎯 Gap: 8.5/10</div>
                                </div>
                                <div class="opportunity-item">
                                    <div class="opportunity-title">🌍 Emerging Markets</div>
                                    <div class="opportunity-desc">Solutions for developing economies</div>
                                    <div class="opportunity-score">🎯 Gap: 8.2/10</div>
                                </div>
                                <div class="opportunity-item">
                                    <div class="opportunity-title">🔄 Integration Platforms</div>
                                    <div class="opportunity-desc">Unified farm management systems</div>
                                    <div class="opportunity-score">🎯 Gap: 7.8/10</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AI Insights Tab -->
                <div id="insights-tab" class="tab-panel">
                    <h2 class="section-title">🤖 AI-Generated Insights</h2>
                    
                    <div class="cards-grid">
                        <div class="card" style="grid-column: 1 / -1;">
                            <div class="card-header">
                                <div class="card-icon">🧠</div>
                                <div class="card-title">Strategic Recommendations</div>
                            </div>
                            
                            <div class="alert alert-success">
                                <strong>🚀 High Priority:</strong> AI-powered crop disease detection shows highest market potential with minimal competition in 90%+ accuracy segment.
                            </div>
                            
                            <div class="alert alert-warning">
                                <strong>⏰ Timing Alert:</strong> Agricultural AI regulations evolving rapidly. Recommend market entry within 12 months.
                            </div>
                            
                            <div class="alert alert-info">
                                <strong>🤝 Partnership Opportunity:</strong> Consider strategic partnerships with John Deere or Climate Corp for distribution.
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div class="card-icon">📡</div>
                                <div class="card-title">Market Signals</div>
                            </div>
                            
                            <div class="metric">
                                <span class="metric-label">Sentiment Analysis</span>
                                <span class="score high">Very Positive</span>
                            </div>
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 89%;"></div>
                                </div>
                            </div>
                            
                            <div class="metric">
                                <span class="metric-label">Investor Interest</span>
                                <span class="score high">Extremely High</span>
                            </div>
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 94%;"></div>
                                </div>
                            </div>

                            <div class="metric">
                                <span class="metric-label">Regulatory Climate</span>
                                <span class="score medium">Favorable</span>
                            </div>
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 67%;"></div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div class="card-icon">🔮</div>
                                <div class="card-title">Predictions</div>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Market Timing</span>
                                <span class="metric-value">9.1/10</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Tech Readiness</span>
                                <span class="score high">Ready</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Adoption Rate</span>
                                <span class="score high">Accelerating</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Recommendation</span>
                                <span class="score high">Build Now</span>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <div class="card-icon">💎</div>
                                <div class="card-title">Hidden Gems</div>
                            </div>
                            <div class="opportunities-list" style="max-height: 250px;">
                                <div class="opportunity-item">
                                    <div class="opportunity-title">⚡ Agricultural Edge Computing</div>
                                    <div class="opportunity-desc">Low-latency processing for remote farms</div>
                                </div>
                                <div class="opportunity-item">
                                    <div class="opportunity-title">🧘 Farmer Mental Health Tech</div>
                                    <div class="opportunity-desc">Digital wellness platforms</div>
                                </div>
                                <div class="opportunity-item">
                                    <div class="opportunity-title">🤖 Robotics as a Service</div>
                                    <div class="opportunity-desc">Rental model for expensive farm robots</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reports Tab -->
                <div id="reports-tab" class="tab-panel">
                    <h2 class="section-title">📄 Generated Reports</h2>
                    
                    <div class="reports-grid">
                        <div class="report-card">
                            <div class="report-icon">📊</div>
                            <h3 style="margin-bottom: 1rem;">Market Analysis Report</h3>
                            <p style="color: var(--gray); margin-bottom: 1.5rem; line-height: 1.5;">Comprehensive 50-page analysis with competitor landscape and opportunities.</p>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="color: var(--gray-light); font-size: 0.875rem;">2 hours ago</span>
                                <button class="btn btn-primary">📥 Download</button>
                            </div>
                        </div>

                        <div class="report-card">
                            <div class="report-icon">💰</div>
                            <h3 style="margin-bottom: 1rem;">Investment Landscape</h3>
                            <p style="color: var(--gray); margin-bottom: 1.5rem; line-height: 1.5;">Funding trends, key investors, and valuation benchmarks in AgTech.</p>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="color: var(--gray-light); font-size: 0.875rem;">1 day ago</span>
                                <button class="btn btn-primary">📥 Download</button>
                            </div>
                        </div>

                        <div class="report-card">
                            <div class="report-icon">🎯</div>
                            <h3 style="margin-bottom: 1rem;">Opportunity Deep Dive</h3>
                            <p style="color: var(--gray); margin-bottom: 1.5rem; line-height: 1.5;">Top 10 opportunities with market sizing and go-to-market strategies.</p>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="color: var(--gray-light); font-size: 0.875rem;">3 days ago</span>
                                <button class="btn btn-primary">📥 Download</button>
                            </div>
                        </div>

                        <div class="report-card">
                            <div class="report-icon">🔬</div>
                            <h3 style="margin-bottom: 1rem;">Technology Trends</h3>
                            <p style="color: var(--gray); margin-bottom: 1.5rem; line-height: 1.5;">Emerging technologies and patent landscapes shaping agriculture.</p>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="color: var(--gray-light); font-size: 0.875rem;">1 week ago</span>
                                <button class="btn btn-primary">📥 Download</button>
                            </div>
                        </div>
                    </div>

                    <div style="margin-top: 3rem; text-align: center;">
                        <button class="btn btn-success" style="padding: 1rem 2.5rem; font-size: 1rem;">
                            ✨ Generate Custom Report
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Action Button -->
    <button class="fab" onclick="window.showQuickActions()">⚡</button>

    <script>
        // Define main functions first
        function switchTab(tabName) {
            // Remove active from all tabs and panels
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            
            // Add active to clicked tab and corresponding panel
            event.target.classList.add('active');
            document.getElementById(tabName + '-tab').classList.add('active');
            
            // Update current tab index for swipe navigation
            const tabs = ['analysis', 'opportunities', 'competitors', 'insights', 'reports'];
            currentTab = tabs.indexOf(tabName);
            
            // Scroll tab into view on mobile
            scrollTabIntoView(event.target);
            
            // Trigger chart animation if switching to analysis tab
            if (tabName === 'analysis') {
                setTimeout(animateChart, 300);
            }
        }

        function analyzeMarket() {
            const btn = event.target;
            const originalText = btn.innerHTML;
            
            btn.innerHTML = '🔄 Analyzing...';
            btn.disabled = true;
            btn.classList.add('loading');
            
            // Simulate analysis
            setTimeout(() => {
                btn.innerHTML = '✅ Complete!';
                btn.style.background = 'linear-gradient(135deg, var(--success), #059669)';
                
                // Animate all progress bars
                document.querySelectorAll('.progress-fill').forEach(bar => {
                    const width = bar.style.width;
                    bar.style.width = '0%';
                    setTimeout(() => {
                        bar.style.width = width;
                    }, 200);
                });
                
                // Reset button
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.style.background = '';
                    btn.disabled = false;
                    btn.classList.remove('loading');
                }, 3000);
            }, 2500);
        }

        function showQuickActions() {
            alert('Quick Actions:\n• Generate Report\n• Export Data\n• Schedule Analysis\n• Set Alerts');
        }

        // Global variables
        let startX = 0;
        let currentTab = 0;
        const tabs = ['analysis', 'opportunities', 'competitors', 'insights', 'reports'];
        // Chart animation and other functions
        function animateChart() {
            const chartLine = document.querySelector('.chart-line');
            const chartDots = document.querySelectorAll('.chart-dot');
            
            if (chartLine) {
                const pathLength = chartLine.getTotalLength();
                chartLine.style.strokeDasharray = pathLength + ' ' + pathLength;
                chartLine.style.strokeDashoffset = pathLength;
                chartLine.style.transition = 'stroke-dashoffset 2s ease-in-out';
                
                setTimeout(() => {
                    chartLine.style.strokeDashoffset = '0';
                }, 100);
                
                chartDots.forEach((dot, index) => {
                    dot.style.opacity = '0';
                    dot.style.transform = 'scale(0)';
                    dot.style.transition = 'all 0.4s ease';
                    
                    setTimeout(() => {
                        dot.style.opacity = '1';
                        dot.style.transform = 'scale(1)';
                    }, 300 + index * 150);
                });
            }
        }

        function scrollTabIntoView(activeTab) {
            if (window.innerWidth <= 768) {
                const tabsContainer = document.querySelector('.tabs');
                const tabRect = activeTab.getBoundingClientRect();
                const containerRect = tabsContainer.getBoundingClientRect();
                
                if (tabRect.left < containerRect.left || tabRect.right > containerRect.right) {
                    activeTab.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'nearest', 
                        inline: 'center' 
                    });
                }
            }
        }

        // Intersection observer for chart
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    animateChart();
                    observer.unobserve(entry.target);
                }
            });
        });

        const chartContainer = document.querySelector('.chart-container');
        if (chartContainer) {
            observer.observe(chartContainer);
        }

        // Real-time updates simulation
        setInterval(() => {
            const metrics = document.querySelectorAll('.metric-value');
            const randomMetric = metrics[Math.floor(Math.random() * metrics.length)];
            
            if (randomMetric && randomMetric.textContent.includes('$')) {
                const originalColor = randomMetric.style.color;
                randomMetric.style.color = 'var(--success)';
                randomMetric.style.transform = 'scale(1.1)';
                
                setTimeout(() => {
                    randomMetric.style.color = originalColor;
                    randomMetric.style.transform = 'scale(1)';
                }, 1000);
            }
        }, 8000);

        // Touch gestures for mobile tab navigation
        let startX = 0;
        let currentTab = 0;
        const tabs = ['analysis', 'opportunities', 'competitors', 'insights', 'reports'];

        document.addEventListener('touchstart', (e) => {
            startX = e.touches[0].clientX;
        });

        document.addEventListener('touchend', (e) => {
            const endX = e.changedTouches[0].clientX;
            const diffX = startX - endX;
            
            if (Math.abs(diffX) > 50) { // Minimum swipe distance
                if (diffX > 0 && currentTab < tabs.length - 1) {
                    // Swipe left - next tab
                    currentTab++;
                    switchTabProgrammatically(tabs[currentTab]);
                } else if (diffX < 0 && currentTab > 0) {
                    // Swipe right - previous tab
                    currentTab--;
                    switchTabProgrammatically(tabs[currentTab]);
                }
            }
        });

        function switchTabProgrammatically(tabName) {
            // Remove active from all tabs and panels
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            
            // Find and activate the correct tab button
            const tabs = document.querySelectorAll('.tab');
            const tabButtons = ['analysis', 'opportunities', 'competitors', 'insights', 'reports'];
            const targetTabIndex = tabButtons.indexOf(tabName);
            
            if (targetTabIndex !== -1 && tabs[targetTabIndex]) {
                tabs[targetTabIndex].classList.add('active');
                scrollTabIntoView(tabs[targetTabIndex]);
            }
            
            // Activate the corresponding panel
            const targetPanel = document.getElementById(tabName + '-tab');
            if (targetPanel) {
                targetPanel.classList.add('active');
            }
            
            // Trigger chart animation if switching to analysis tab
            if (tabName === 'analysis') {
                setTimeout(animateChart, 300);
            }
        }

        // Enhanced mobile interactions
        document.querySelectorAll('.card').forEach(card => {
            card.addEventListener('touchstart', function() {
                this.style.transform = 'scale(0.98)';
            });
            
            card.addEventListener('touchend', function() {
                this.style.transform = '';
            });
        });

        // Auto-scroll tabs into view on mobile
        function scrollTabIntoView(activeTab) {
            if (window.innerWidth <= 768) {
                const tabsContainer = document.querySelector('.tabs');
                const tabRect = activeTab.getBoundingClientRect();
                const containerRect = tabsContainer.getBoundingClientRect();
                
                if (tabRect.left < containerRect.left || tabRect.right > containerRect.right) {
                    activeTab.scrollIntoView({ 
                        behavior: 'smooth', 
                        block: 'nearest', 
                        inline: 'center' 
                    });
                }
            }
        }

        // Enhanced loading states
        function showLoadingState(element) {
            element.classList.add('loading');
            const originalContent = element.innerHTML;
            element.setAttribute('data-original', originalContent);
            
            if (element.classList.contains('btn')) {
                element.innerHTML = '<span style="display: inline-block; animation: spin 1s linear infinite;">⏳</span> Loading...';
            }
            
            return originalContent;
        }

        function hideLoadingState(element, originalContent = null) {
            element.classList.remove('loading');
            if (originalContent) {
                element.innerHTML = originalContent;
            } else {
                const stored = element.getAttribute('data-original');
                if (stored) {
                    element.innerHTML = stored;
                    element.removeAttribute('data-original');
                }
            }
        }

        // CSS animation for loading spinner
        const style = document.createElement('style');
        style.textContent = `
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
        `;
        document.head.appendChild(style);

        // Progressive Web App features
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // Service worker would be registered here for offline support
                console.log('PWA features available');
            });
        }

        // Accessibility improvements
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Tab') {
                document.body.classList.add('keyboard-navigation');
            }
        });

        document.addEventListener('mousedown', () => {
            document.body.classList.remove('keyboard-navigation');
        });

        // Performance monitoring
        function trackPerformance() {
            if ('performance' in window) {
                window.addEventListener('load', () => {
                    setTimeout(() => {
                        const perfData = performance.getEntriesByType('navigation')[0];
                        console.log('Page load time:', perfData.loadEventEnd - perfData.loadEventStart, 'ms');
                    }, 0);
                });
            }
        }
        trackPerformance();

        // Initialize app
        document.addEventListener('DOMContentLoaded', () => {
            // Trigger initial animations
            setTimeout(() => {
                document.querySelectorAll('.card').forEach((card, index) => {
                    card.style.opacity = '0';
                    card.style.transform = 'translateY(20px)';
                    card.style.transition = 'all 0.6s ease';
                    
                    setTimeout(() => {
                        card.style.opacity = '1';
                        card.style.transform = 'translateY(0)';
                    }, index * 100);
                });
            }, 300);
        });